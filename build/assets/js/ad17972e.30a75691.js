"use strict";(self.webpackChunkthinkingdata_docs=self.webpackChunkthinkingdata_docs||[]).push([[507],{8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>o});var r=t(6540);const i={},s=r.createContext(i);function a(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),r.createElement(s.Provider,{value:e},n.children)}},8734:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var r=t(4848),i=t(8453);const s={sidebar_position:5},a="\ubcf4\uc548 \uac00\uc774\ub4dc",o={id:"guides/security",title:"\ubcf4\uc548 \uac00\uc774\ub4dc",description:"ThinkingData \ud50c\ub7ab\ud3fc\uc5d0\uc11c \ub370\uc774\ud130 \ubcf4\uc548\uacfc \uc811\uadfc \uc81c\uc5b4\ub97c \uc704\ud55c \ubaa8\ubc94 \uc0ac\ub840\ub97c \uc548\ub0b4\ud569\ub2c8\ub2e4.",source:"@site/docs/guides/security.md",sourceDirName:"guides",slug:"/guides/security",permalink:"/thinkingdata-docs/docs/guides/security",draft:!1,unlisted:!1,editUrl:"https://github.com/wo123kr/thinkingdata-docs/tree/main/docs/guides/security.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"docs2Sidebar",previous:{title:"\uc131\ub2a5 \ucd5c\uc801\ud654",permalink:"/thinkingdata-docs/docs/guides/performance"}},d={},c=[{value:"\ud83d\udd10 \uae30\ubcf8 \ubcf4\uc548 \uc6d0\uce59",id:"-\uae30\ubcf8-\ubcf4\uc548-\uc6d0\uce59",level:2},{value:"1. \ucd5c\uc18c \uad8c\ud55c \uc6d0\uce59",id:"1-\ucd5c\uc18c-\uad8c\ud55c-\uc6d0\uce59",level:3},{value:"2. API \ud0a4 \uad00\ub9ac",id:"2-api-\ud0a4-\uad00\ub9ac",level:3},{value:"\ud83d\udd12 \ub370\uc774\ud130 \uc554\ud638\ud654",id:"-\ub370\uc774\ud130-\uc554\ud638\ud654",level:2},{value:"1. \uc804\uc1a1 \uc911 \uc554\ud638\ud654",id:"1-\uc804\uc1a1-\uc911-\uc554\ud638\ud654",level:3},{value:"2. \ubbfc\uac10\ud55c \ub370\uc774\ud130 \ub9c8\uc2a4\ud0b9",id:"2-\ubbfc\uac10\ud55c-\ub370\uc774\ud130-\ub9c8\uc2a4\ud0b9",level:3},{value:"3. \ub370\uc774\ud130 \ud574\uc2dc\ud654",id:"3-\ub370\uc774\ud130-\ud574\uc2dc\ud654",level:3},{value:"\ud83d\udee1\ufe0f \uc811\uadfc \uc81c\uc5b4",id:"\ufe0f-\uc811\uadfc-\uc81c\uc5b4",level:2},{value:"1. API \ud0a4 \uad8c\ud55c \uad00\ub9ac",id:"1-api-\ud0a4-\uad8c\ud55c-\uad00\ub9ac",level:3},{value:"2. IP \ud654\uc774\ud2b8\ub9ac\uc2a4\ud2b8",id:"2-ip-\ud654\uc774\ud2b8\ub9ac\uc2a4\ud2b8",level:3},{value:"3. \uc0ac\uc6a9\uc790 \uc778\uc99d",id:"3-\uc0ac\uc6a9\uc790-\uc778\uc99d",level:3},{value:"\ud83d\udd0d \ub370\uc774\ud130 \uac80\uc99d",id:"-\ub370\uc774\ud130-\uac80\uc99d",level:2},{value:"1. \uc785\ub825 \ub370\uc774\ud130 \uac80\uc99d",id:"1-\uc785\ub825-\ub370\uc774\ud130-\uac80\uc99d",level:3},{value:"2. \uc2a4\ud0a4\ub9c8 \uac80\uc99d",id:"2-\uc2a4\ud0a4\ub9c8-\uac80\uc99d",level:3},{value:"\ud83d\udea8 \ubcf4\uc548 \ubaa8\ub2c8\ud130\ub9c1",id:"-\ubcf4\uc548-\ubaa8\ub2c8\ud130\ub9c1",level:2},{value:"1. \uc774\uc0c1 \ud0d0\uc9c0",id:"1-\uc774\uc0c1-\ud0d0\uc9c0",level:3},{value:"2. \uac10\uc0ac \ub85c\uadf8",id:"2-\uac10\uc0ac-\ub85c\uadf8",level:3},{value:"\ud83d\udd10 \uace0\uae09 \ubcf4\uc548 \uae30\ub2a5",id:"-\uace0\uae09-\ubcf4\uc548-\uae30\ub2a5",level:2},{value:"1. \ub370\uc774\ud130 \uc554\ud638\ud654 \uc800\uc7a5",id:"1-\ub370\uc774\ud130-\uc554\ud638\ud654-\uc800\uc7a5",level:3},{value:"2. \ud1a0\ud070 \uae30\ubc18 \uc778\uc99d",id:"2-\ud1a0\ud070-\uae30\ubc18-\uc778\uc99d",level:3},{value:"\ud83d\ude80 \ub2e4\uc74c \ub2e8\uacc4",id:"-\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"\ubcf4\uc548-\uac00\uc774\ub4dc",children:"\ubcf4\uc548 \uac00\uc774\ub4dc"}),"\n",(0,r.jsx)(e.p,{children:"ThinkingData \ud50c\ub7ab\ud3fc\uc5d0\uc11c \ub370\uc774\ud130 \ubcf4\uc548\uacfc \uc811\uadfc \uc81c\uc5b4\ub97c \uc704\ud55c \ubaa8\ubc94 \uc0ac\ub840\ub97c \uc548\ub0b4\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.h2,{id:"-\uae30\ubcf8-\ubcf4\uc548-\uc6d0\uce59",children:"\ud83d\udd10 \uae30\ubcf8 \ubcf4\uc548 \uc6d0\uce59"}),"\n",(0,r.jsx)(e.h3,{id:"1-\ucd5c\uc18c-\uad8c\ud55c-\uc6d0\uce59",children:"1. \ucd5c\uc18c \uad8c\ud55c \uc6d0\uce59"}),"\n",(0,r.jsx)(e.p,{children:"\ud544\uc694\ud55c \ucd5c\uc18c\ud55c\uc758 \uad8c\ud55c\ub9cc \ubd80\uc5ec\ud558\uc5ec \ubcf4\uc548 \uc704\ud5d8\uc744 \ucd5c\uc18c\ud654\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"// \uc88b\uc740 \uc608: \ud544\uc694\ud55c \uad8c\ud55c\ub9cc \uc694\uccad\nconst td = new ThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'read-write-api-key',  // \uc77d\uae30/\uc4f0\uae30 \uad8c\ud55c\ub9cc\n  serverUrl: 'https://api.thinkingdata.io'\n});\n\n// \ub098\uc05c \uc608: \uacfc\ub3c4\ud55c \uad8c\ud55c\nconst td = new ThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'admin-api-key',       // \uad00\ub9ac\uc790 \uad8c\ud55c (\ubd88\ud544\uc694)\n  serverUrl: 'https://api.thinkingdata.io'\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-api-\ud0a4-\uad00\ub9ac",children:"2. API \ud0a4 \uad00\ub9ac"}),"\n",(0,r.jsx)(e.p,{children:"API \ud0a4\ub97c \uc548\uc804\ud558\uac8c \uad00\ub9ac\ud558\uace0 \uc815\uae30\uc801\uc73c\ub85c \uac31\uc2e0\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"// \ud658\uacbd \ubcc0\uc218\ub97c \ud1b5\ud55c API \ud0a4 \uad00\ub9ac\nconst td = new ThinkingData({\n  projectId: process.env.THINKINGDATA_PROJECT_ID,\n  apiKey: process.env.THINKINGDATA_API_KEY,\n  serverUrl: process.env.THINKINGDATA_SERVER_URL\n});\n\n// .env \ud30c\uc77c (\uc808\ub300 Git\uc5d0 \ucee4\ubc0b\ud558\uc9c0 \ub9c8\uc138\uc694)\n// THINKINGDATA_PROJECT_ID=your-project-id\n// THINKINGDATA_API_KEY=your-api-key\n// THINKINGDATA_SERVER_URL=https://api.thinkingdata.io\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\ub370\uc774\ud130-\uc554\ud638\ud654",children:"\ud83d\udd12 \ub370\uc774\ud130 \uc554\ud638\ud654"}),"\n",(0,r.jsx)(e.h3,{id:"1-\uc804\uc1a1-\uc911-\uc554\ud638\ud654",children:"1. \uc804\uc1a1 \uc911 \uc554\ud638\ud654"}),"\n",(0,r.jsx)(e.p,{children:"\ubaa8\ub4e0 \ub370\uc774\ud130 \uc804\uc1a1\uc740 HTTPS\ub97c \ud1b5\ud574 \uc554\ud638\ud654\ub429\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const td = new ThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'your-api-key',\n  serverUrl: 'https://api.thinkingdata.io',  // HTTPS \ud544\uc218\n  enableHttpsOnly: true                       // HTTP \uc694\uccad \ucc28\ub2e8\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\ubbfc\uac10\ud55c-\ub370\uc774\ud130-\ub9c8\uc2a4\ud0b9",children:"2. \ubbfc\uac10\ud55c \ub370\uc774\ud130 \ub9c8\uc2a4\ud0b9"}),"\n",(0,r.jsx)(e.p,{children:"\uac1c\uc778\uc815\ubcf4\ub098 \ubbfc\uac10\ud55c \ub370\uc774\ud130\ub97c \ub9c8\uc2a4\ud0b9\ud558\uc5ec \uc804\uc1a1\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"// \ubbfc\uac10\ud55c \ub370\uc774\ud130 \ub9c8\uc2a4\ud0b9 \ud568\uc218\nfunction maskSensitiveData(data) {\n  const masked = { ...data };\n  \n  // \uc774\uba54\uc77c \ub9c8\uc2a4\ud0b9\n  if (masked.email) {\n    const [local, domain] = masked.email.split('@');\n    masked.email = `${local.charAt(0)}***@${domain}`;\n  }\n  \n  // \uc804\ud654\ubc88\ud638 \ub9c8\uc2a4\ud0b9\n  if (masked.phone) {\n    masked.phone = masked.phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2');\n  }\n  \n  // \uc2e0\uc6a9\uce74\ub4dc \ubc88\ud638 \ub9c8\uc2a4\ud0b9\n  if (masked.credit_card) {\n    masked.credit_card = masked.credit_card.replace(/\\d(?=\\d{4})/g, '*');\n  }\n  \n  return masked;\n}\n\n// \ub9c8\uc2a4\ud0b9\ub41c \ub370\uc774\ud130 \uc804\uc1a1\nconst userData = {\n  name: '\ud64d\uae38\ub3d9',\n  email: 'hong@example.com',\n  phone: '010-1234-5678',\n  credit_card: '1234-5678-9012-3456'\n};\n\nconst maskedData = maskSensitiveData(userData);\ntd.identify('user123', maskedData);\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\ub370\uc774\ud130-\ud574\uc2dc\ud654",children:"3. \ub370\uc774\ud130 \ud574\uc2dc\ud654"}),"\n",(0,r.jsx)(e.p,{children:"\ubbfc\uac10\ud55c \uc2dd\ubcc4\uc790\ub97c \ud574\uc2dc\ud654\ud558\uc5ec \uc804\uc1a1\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const crypto = require('crypto');\n\n// SHA-256 \ud574\uc2dc \ud568\uc218\nfunction hashData(data) {\n  return crypto.createHash('sha256').update(data).digest('hex');\n}\n\n// \uc0ac\uc6a9\uc790 ID \ud574\uc2dc\ud654\nconst userId = 'user123';\nconst hashedUserId = hashData(userId);\n\ntd.track('page_view', {\n  userId: hashedUserId,  // \ud574\uc2dc\ud654\ub41c \uc0ac\uc6a9\uc790 ID\n  properties: {\n    page: '/home',\n    timestamp: Date.now()\n  }\n});\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-\uc811\uadfc-\uc81c\uc5b4",children:"\ud83d\udee1\ufe0f \uc811\uadfc \uc81c\uc5b4"}),"\n",(0,r.jsx)(e.h3,{id:"1-api-\ud0a4-\uad8c\ud55c-\uad00\ub9ac",children:"1. API \ud0a4 \uad8c\ud55c \uad00\ub9ac"}),"\n",(0,r.jsx)(e.p,{children:"\ub2e4\uc591\ud55c \uad8c\ud55c \uc218\uc900\uc758 API \ud0a4\ub97c \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"// \uc77d\uae30 \uc804\uc6a9 API \ud0a4 (\ubd84\uc11d\uc6a9)\nconst readOnlyTd = new ThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'read-only-api-key',\n  permissions: ['read']\n});\n\n// \uc4f0\uae30 \uc804\uc6a9 API \ud0a4 (\ub370\uc774\ud130 \uc218\uc9d1\uc6a9)\nconst writeOnlyTd = new ThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'write-only-api-key',\n  permissions: ['write']\n});\n\n// \uad00\ub9ac\uc790 API \ud0a4 (\uc124\uc815 \ubcc0\uacbd\uc6a9)\nconst adminTd = new ThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'admin-api-key',\n  permissions: ['read', 'write', 'admin']\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-ip-\ud654\uc774\ud2b8\ub9ac\uc2a4\ud2b8",children:"2. IP \ud654\uc774\ud2b8\ub9ac\uc2a4\ud2b8"}),"\n",(0,r.jsx)(e.p,{children:"\ud2b9\uc815 IP \uc8fc\uc18c\uc5d0\uc11c\ub9cc \uc811\uadfc\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const td = new ThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'your-api-key',\n  allowedIPs: [\n    '192.168.1.100',\n    '10.0.0.0/8',\n    '172.16.0.0/12'\n  ]\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\uc0ac\uc6a9\uc790-\uc778\uc99d",children:"3. \uc0ac\uc6a9\uc790 \uc778\uc99d"}),"\n",(0,r.jsx)(e.p,{children:"\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub808\ubca8\uc5d0\uc11c \uc0ac\uc6a9\uc790 \uc778\uc99d\uc744 \uad6c\ud604\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"class AuthenticatedThinkingData {\n  constructor(config) {\n    this.td = new ThinkingData(config);\n    this.authenticatedUsers = new Set();\n  }\n\n  authenticateUser(userId, token) {\n    // \ud1a0\ud070 \uac80\uc99d \ub85c\uc9c1\n    if (this.validateToken(token)) {\n      this.authenticatedUsers.add(userId);\n      return true;\n    }\n    return false;\n  }\n\n  track(eventName, properties) {\n    const { userId } = properties;\n    \n    if (!this.authenticatedUsers.has(userId)) {\n      throw new Error('User not authenticated');\n    }\n    \n    return this.td.track(eventName, properties);\n  }\n\n  validateToken(token) {\n    // JWT \ud1a0\ud070 \uac80\uc99d \ub85c\uc9c1\n    // \uc2e4\uc81c \uad6c\ud604\uc5d0\uc11c\ub294 JWT \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9\n    return token && token.length > 0;\n  }\n}\n\nconst authTd = new AuthenticatedThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'your-api-key'\n});\n\n// \uc0ac\uc6a9\uc790 \uc778\uc99d \ud6c4 \uc774\ubca4\ud2b8 \uc804\uc1a1\nauthTd.authenticateUser('user123', 'valid-token');\nauthTd.track('page_view', {\n  userId: 'user123',\n  properties: { page: '/home' }\n});\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\ub370\uc774\ud130-\uac80\uc99d",children:"\ud83d\udd0d \ub370\uc774\ud130 \uac80\uc99d"}),"\n",(0,r.jsx)(e.h3,{id:"1-\uc785\ub825-\ub370\uc774\ud130-\uac80\uc99d",children:"1. \uc785\ub825 \ub370\uc774\ud130 \uac80\uc99d"}),"\n",(0,r.jsx)(e.p,{children:"\uc804\uc1a1 \uc804 \ub370\uc774\ud130\ub97c \uac80\uc99d\ud558\uc5ec \ubcf4\uc548 \uc704\ud5d8\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"class DataValidator {\n  static validateEvent(eventName, properties) {\n    const errors = [];\n    \n    // \uc774\ubca4\ud2b8 \uc774\ub984 \uac80\uc99d\n    if (!eventName || typeof eventName !== 'string') {\n      errors.push('Event name must be a non-empty string');\n    }\n    \n    if (eventName.length > 100) {\n      errors.push('Event name too long (max 100 characters)');\n    }\n    \n    // \uc0ac\uc6a9\uc790 ID \uac80\uc99d\n    if (!properties.userId) {\n      errors.push('userId is required');\n    }\n    \n    // \uc18d\uc131 \ud06c\uae30 \uac80\uc99d\n    const propertiesSize = JSON.stringify(properties).length;\n    if (propertiesSize > 10000) {\n      errors.push('Properties too large (max 10KB)');\n    }\n    \n    // \uae08\uc9c0\ub41c \ubb38\uc790 \uac80\uc99d\n    const forbiddenChars = /[<>\\\"'&]/;\n    if (forbiddenChars.test(eventName)) {\n      errors.push('Event name contains forbidden characters');\n    }\n    \n    return errors;\n  }\n\n  static sanitizeData(data) {\n    const sanitized = {};\n    \n    for (const [key, value] of Object.entries(data)) {\n      if (typeof value === 'string') {\n        // XSS \ubc29\uc9c0\ub97c \uc704\ud55c \uc774\uc2a4\ucf00\uc774\ud504\n        sanitized[key] = value\n          .replace(/&/g, '&amp;')\n          .replace(/</g, '&lt;')\n          .replace(/>/g, '&gt;')\n          .replace(/\"/g, '&quot;')\n          .replace(/'/g, '&#x27;');\n      } else {\n        sanitized[key] = value;\n      }\n    }\n    \n    return sanitized;\n  }\n}\n\n// \uac80\uc99d \ubc0f \uc815\uc81c \ud6c4 \uc774\ubca4\ud2b8 \uc804\uc1a1\nconst rawProperties = {\n  userId: 'user123',\n  page: '<script>alert(\"xss\")<\/script>',\n  user_input: 'user provided data'\n};\n\nconst errors = DataValidator.validateEvent('page_view', rawProperties);\nif (errors.length === 0) {\n  const sanitizedProperties = DataValidator.sanitizeData(rawProperties);\n  td.track('page_view', sanitizedProperties);\n} else {\n  console.error('Validation errors:', errors);\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\uc2a4\ud0a4\ub9c8-\uac80\uc99d",children:"2. \uc2a4\ud0a4\ub9c8 \uac80\uc99d"}),"\n",(0,r.jsx)(e.p,{children:"\ub370\uc774\ud130 \uc2a4\ud0a4\ub9c8\ub97c \uc815\uc758\ud558\uace0 \uac80\uc99d\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const Joi = require('joi');\n\n// \uc774\ubca4\ud2b8 \uc2a4\ud0a4\ub9c8 \uc815\uc758\nconst eventSchema = Joi.object({\n  userId: Joi.string().required().max(100),\n  event: Joi.string().required().max(100),\n  properties: Joi.object({\n    page: Joi.string().max(500),\n    timestamp: Joi.number().integer().min(0),\n    user_agent: Joi.string().max(1000),\n    ip_address: Joi.string().ip(),\n    referrer: Joi.string().max(500).allow(''),\n    session_id: Joi.string().max(100)\n  }).max(50) // \ucd5c\ub300 50\uac1c \uc18d\uc131\n});\n\n// \uc2a4\ud0a4\ub9c8 \uac80\uc99d\nfunction validateEventSchema(eventData) {\n  const { error, value } = eventSchema.validate(eventData);\n  \n  if (error) {\n    throw new Error(`Schema validation failed: ${error.details[0].message}`);\n  }\n  \n  return value;\n}\n\n// \uac80\uc99d\ub41c \uc774\ubca4\ud2b8 \uc804\uc1a1\ntry {\n  const validatedEvent = validateEventSchema({\n    userId: 'user123',\n    event: 'page_view',\n    properties: {\n      page: '/home',\n      timestamp: Date.now(),\n      user_agent: navigator.userAgent,\n      ip_address: '192.168.1.1'\n    }\n  });\n  \n  td.track(validatedEvent.event, validatedEvent);\n} catch (error) {\n  console.error('Event validation failed:', error.message);\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\ubcf4\uc548-\ubaa8\ub2c8\ud130\ub9c1",children:"\ud83d\udea8 \ubcf4\uc548 \ubaa8\ub2c8\ud130\ub9c1"}),"\n",(0,r.jsx)(e.h3,{id:"1-\uc774\uc0c1-\ud0d0\uc9c0",children:"1. \uc774\uc0c1 \ud0d0\uc9c0"}),"\n",(0,r.jsx)(e.p,{children:"\ube44\uc815\uc0c1\uc801\uc778 \ud328\ud134\uc744 \uac10\uc9c0\ud558\uace0 \ub300\uc751\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"class SecurityMonitor {\n  constructor() {\n    this.eventCounts = new Map();\n    this.suspiciousPatterns = new Set();\n    this.rateLimits = {\n      eventsPerMinute: 1000,\n      eventsPerHour: 50000\n    };\n  }\n\n  trackEvent(userId, eventName) {\n    const now = Date.now();\n    const minuteKey = Math.floor(now / 60000);\n    const hourKey = Math.floor(now / 3600000);\n    \n    // \ubd84\ubcc4 \uc774\ubca4\ud2b8 \uce74\uc6b4\ud2b8\n    const minuteKeyStr = `${userId}:${minuteKey}`;\n    this.eventCounts.set(minuteKeyStr, (this.eventCounts.get(minuteKeyStr) || 0) + 1);\n    \n    // \uc2dc\uac04\ubcc4 \uc774\ubca4\ud2b8 \uce74\uc6b4\ud2b8\n    const hourKeyStr = `${userId}:${hourKey}`;\n    this.eventCounts.set(hourKeyStr, (this.eventCounts.get(hourKeyStr) || 0) + 1);\n    \n    // \uc18d\ub3c4 \uc81c\ud55c \ud655\uc778\n    if (this.eventCounts.get(minuteKeyStr) > this.rateLimits.eventsPerMinute) {\n      this.suspiciousPatterns.add(`${userId}:rate_limit_exceeded`);\n      console.warn(`Rate limit exceeded for user ${userId}`);\n    }\n  }\n\n  isSuspicious(userId) {\n    return this.suspiciousPatterns.has(`${userId}:rate_limit_exceeded`);\n  }\n\n  getEventCount(userId, timeWindow = 'minute') {\n    const now = Date.now();\n    const key = timeWindow === 'minute' \n      ? Math.floor(now / 60000) \n      : Math.floor(now / 3600000);\n    \n    return this.eventCounts.get(`${userId}:${key}`) || 0;\n  }\n}\n\nconst securityMonitor = new SecurityMonitor();\n\n// \ubcf4\uc548 \ubaa8\ub2c8\ud130\ub9c1\uacfc \ud568\uaed8 \uc774\ubca4\ud2b8 \uc804\uc1a1\nfunction secureTrack(userId, eventName, properties) {\n  securityMonitor.trackEvent(userId, eventName);\n  \n  if (securityMonitor.isSuspicious(userId)) {\n    console.warn(`Suspicious activity detected for user ${userId}`);\n    // \ucd94\uac00 \ubcf4\uc548 \uc870\uce58 (\uc608: \ub85c\uae45, \uc54c\ub9bc, \ucc28\ub2e8)\n    return;\n  }\n  \n  td.track(eventName, {\n    userId,\n    properties\n  });\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\uac10\uc0ac-\ub85c\uadf8",children:"2. \uac10\uc0ac \ub85c\uadf8"}),"\n",(0,r.jsx)(e.p,{children:"\ubaa8\ub4e0 \ub370\uc774\ud130 \uc811\uadfc\uc744 \uae30\ub85d\ud558\uace0 \ubaa8\ub2c8\ud130\ub9c1\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"class AuditLogger {\n  constructor() {\n    this.logs = [];\n  }\n\n  logAccess(userId, action, details) {\n    const logEntry = {\n      timestamp: new Date().toISOString(),\n      userId,\n      action,\n      details,\n      ipAddress: this.getClientIP(),\n      userAgent: this.getUserAgent()\n    };\n    \n    this.logs.push(logEntry);\n    \n    // \ub85c\uadf8 \ud30c\uc77c\uc5d0 \uc800\uc7a5\n    this.saveToFile(logEntry);\n    \n    // \ubcf4\uc548 \uc774\ubca4\ud2b8 \uc54c\ub9bc\n    if (this.isSecurityEvent(action)) {\n      this.sendSecurityAlert(logEntry);\n    }\n  }\n\n  isSecurityEvent(action) {\n    const securityActions = [\n      'api_key_compromised',\n      'rate_limit_exceeded',\n      'unauthorized_access',\n      'data_export'\n    ];\n    \n    return securityActions.includes(action);\n  }\n\n  saveToFile(logEntry) {\n    const fs = require('fs');\n    const logLine = JSON.stringify(logEntry) + '\\n';\n    \n    fs.appendFileSync('audit.log', logLine);\n  }\n\n  sendSecurityAlert(logEntry) {\n    // \ubcf4\uc548 \ud300\uc5d0\uac8c \uc54c\ub9bc \uc804\uc1a1\n    console.error('SECURITY ALERT:', logEntry);\n  }\n\n  getClientIP() {\n    // \ud074\ub77c\uc774\uc5b8\ud2b8 IP \uc8fc\uc18c \ud68d\ub4dd \ub85c\uc9c1\n    return '192.168.1.1';\n  }\n\n  getUserAgent() {\n    // \uc0ac\uc6a9\uc790 \uc5d0\uc774\uc804\ud2b8 \ud68d\ub4dd \ub85c\uc9c1\n    return 'Mozilla/5.0...';\n  }\n}\n\nconst auditLogger = new AuditLogger();\n\n// \uac10\uc0ac \ub85c\uadf8\uc640 \ud568\uaed8 \uc774\ubca4\ud2b8 \uc804\uc1a1\nfunction auditedTrack(userId, eventName, properties) {\n  auditLogger.logAccess(userId, 'event_track', {\n    eventName,\n    propertiesCount: Object.keys(properties).length\n  });\n  \n  td.track(eventName, {\n    userId,\n    properties\n  });\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\uace0\uae09-\ubcf4\uc548-\uae30\ub2a5",children:"\ud83d\udd10 \uace0\uae09 \ubcf4\uc548 \uae30\ub2a5"}),"\n",(0,r.jsx)(e.h3,{id:"1-\ub370\uc774\ud130-\uc554\ud638\ud654-\uc800\uc7a5",children:"1. \ub370\uc774\ud130 \uc554\ud638\ud654 \uc800\uc7a5"}),"\n",(0,r.jsx)(e.p,{children:"\ubbfc\uac10\ud55c \ub370\uc774\ud130\ub97c \uc554\ud638\ud654\ud558\uc5ec \uc800\uc7a5\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const crypto = require('crypto');\n\nclass EncryptedThinkingData {\n  constructor(config) {\n    this.td = new ThinkingData(config);\n    this.encryptionKey = config.encryptionKey;\n  }\n\n  encryptData(data) {\n    const algorithm = 'aes-256-cbc';\n    const key = crypto.scryptSync(this.encryptionKey, 'salt', 32);\n    const iv = crypto.randomBytes(16);\n    \n    const cipher = crypto.createCipher(algorithm, key);\n    let encrypted = cipher.update(JSON.stringify(data), 'utf8', 'hex');\n    encrypted += cipher.final('hex');\n    \n    return {\n      encrypted,\n      iv: iv.toString('hex')\n    };\n  }\n\n  decryptData(encryptedData) {\n    const algorithm = 'aes-256-cbc';\n    const key = crypto.scryptSync(this.encryptionKey, 'salt', 32);\n    const iv = Buffer.from(encryptedData.iv, 'hex');\n    \n    const decipher = crypto.createDecipher(algorithm, key);\n    let decrypted = decipher.update(encryptedData.encrypted, 'hex', 'utf8');\n    decrypted += decipher.final('utf8');\n    \n    return JSON.parse(decrypted);\n  }\n\n  track(eventName, properties) {\n    // \ubbfc\uac10\ud55c \ub370\uc774\ud130 \uc554\ud638\ud654\n    const sensitiveFields = ['email', 'phone', 'credit_card'];\n    const encryptedProperties = { ...properties };\n    \n    for (const field of sensitiveFields) {\n      if (encryptedProperties[field]) {\n        const encrypted = this.encryptData(encryptedProperties[field]);\n        encryptedProperties[`${field}_encrypted`] = encrypted;\n        delete encryptedProperties[field];\n      }\n    }\n    \n    return this.td.track(eventName, encryptedProperties);\n  }\n}\n\nconst encryptedTd = new EncryptedThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'your-api-key',\n  encryptionKey: process.env.ENCRYPTION_KEY\n});\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\ud1a0\ud070-\uae30\ubc18-\uc778\uc99d",children:"2. \ud1a0\ud070 \uae30\ubc18 \uc778\uc99d"}),"\n",(0,r.jsx)(e.p,{children:"JWT \ud1a0\ud070\uc744 \uc0ac\uc6a9\ud55c \uac15\ub825\ud55c \uc778\uc99d \uc2dc\uc2a4\ud15c\uc744 \uad6c\ud604\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:"const jwt = require('jsonwebtoken');\n\nclass TokenAuthenticatedThinkingData {\n  constructor(config) {\n    this.td = new ThinkingData(config);\n    this.secretKey = config.secretKey;\n    this.authenticatedTokens = new Set();\n  }\n\n  generateToken(userId, permissions = ['read', 'write']) {\n    const payload = {\n      userId,\n      permissions,\n      iat: Math.floor(Date.now() / 1000),\n      exp: Math.floor(Date.now() / 1000) + (60 * 60) // 1\uc2dc\uac04 \ub9cc\ub8cc\n    };\n    \n    return jwt.sign(payload, this.secretKey);\n  }\n\n  verifyToken(token) {\n    try {\n      const decoded = jwt.verify(token, this.secretKey);\n      return decoded;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  authenticate(token) {\n    const decoded = this.verifyToken(token);\n    if (decoded) {\n      this.authenticatedTokens.add(token);\n      return decoded;\n    }\n    return null;\n  }\n\n  track(token, eventName, properties) {\n    const decoded = this.verifyToken(token);\n    \n    if (!decoded || !this.authenticatedTokens.has(token)) {\n      throw new Error('Invalid or expired token');\n    }\n    \n    if (!decoded.permissions.includes('write')) {\n      throw new Error('Insufficient permissions');\n    }\n    \n    return this.td.track(eventName, {\n      ...properties,\n      userId: decoded.userId\n    });\n  }\n}\n\nconst tokenTd = new TokenAuthenticatedThinkingData({\n  projectId: 'your-project-id',\n  apiKey: 'your-api-key',\n  secretKey: process.env.JWT_SECRET\n});\n\n// \ud1a0\ud070 \uc0dd\uc131 \ubc0f \uc778\uc99d\nconst token = tokenTd.generateToken('user123', ['read', 'write']);\nconst user = tokenTd.authenticate(token);\n\n// \uc778\uc99d\ub41c \ud1a0\ud070\uc73c\ub85c \uc774\ubca4\ud2b8 \uc804\uc1a1\ntokenTd.track(token, 'page_view', {\n  page: '/home',\n  timestamp: Date.now()\n});\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-\ub2e4\uc74c-\ub2e8\uacc4",children:"\ud83d\ude80 \ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,r.jsx)(e.p,{children:"\ubcf4\uc548 \uac00\uc774\ub4dc\ub97c \uc644\ub8cc\ud588\uc2b5\ub2c8\ub2e4! \ub2e4\uc74c \uac00\uc774\ub4dc\ub4e4\uc744 \ud1b5\ud574 \ub354 \uae4a\uc774 \uc788\ub294 \ud559\uc2b5\uc744 \uc9c4\ud589\ud574\ubcf4\uc138\uc694:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/thinkingdata-docs/docs/guides/data-modeling",children:"\ub370\uc774\ud130 \ubaa8\ub378\ub9c1"})," - \ud6a8\uc728\uc801\uc778 \ub370\uc774\ud130 \uad6c\uc870 \uc124\uacc4"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/thinkingdata-docs/docs/guides/performance",children:"\uc131\ub2a5 \ucd5c\uc801\ud654"})," - \ub300\uc6a9\ub7c9 \ub370\uc774\ud130 \ucc98\ub9ac \ucd5c\uc801\ud654"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/thinkingdata-docs/docs/api/reference",children:"API \ucc38\uc870"})," - REST API \uc5d4\ub4dc\ud3ec\uc778\ud2b8"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}}}]);